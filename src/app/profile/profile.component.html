<ng-container *ngIf="user$ | async; let user">
  <div class="ak-page">
    <div class="ak-page__header">
      <ak-category-header>
        <header class="ak-heading">
          <small class="ak-heading__kicker">Profile</small>
          <h1 class="ak-heading__title">{{user.firstName}}</h1>
        </header>
        <button class="ak-header__button" (click)="logout()">
          <ak-icon type="logout"></ak-icon>
        </button>
      </ak-category-header>
    </div>
    <div class="ak-page__content">
      <div class="ak-form">
        <fieldset class="ak-form__inputs">
          <legend class="visually-hidden">Settings</legend>
          <div class="ak-input  ak-organizer">
              <span class="ak-organizer__fill">Enable notifications</span>
            <div class="ak-toggle">
              <input id="toggle" type="checkbox" [checked]="subscribed$ | async"
                     (click)="subscribeToNotifications($event.target.checked)">
              <label for="toggle"></label>
            </div>
          </div>
        </fieldset>
      </div>
      <ak-monthly-appkeeps-card></ak-monthly-appkeeps-card>
      <section class="ak-card">
        <div class="ak-card__header">
          <div class="ak-card__title">Appkeepers</div>
        </div>
        <ol class="ak-card__content">
          <li class="ak-item" *ngFor="let current of users$ | async">
            <div class="ak-item__what  ak-user">{{current.email}} <span
              *ngIf="current.email === user.email">(you)</span></div>
            <button class="ak-items__remove" *ngIf="current.email !== user.email">
              <ak-icon type="close" (click)="removeUser(current)"></ak-icon>
            </button>
          </li>
          <li class="ak-item ak-input  ak-input__interactive">
            <div class="ak-item__what">
              <input type="text" id="friends" placeholder="i.e. appkeeper@mail.com">
            </div>
            <button class="ak-items__remove" (click)="addUser()">
              <ak-icon type="add"></ak-icon>
            </button>
          </li>
        </ol>
      </section>
    </div>
  </div>
</ng-container>
